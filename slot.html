<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>slot</title>
    </head>
    <body>
        <script src="https://unpkg.com/san@latest/dist/san.dev.js"></script>
        <script>
        // var Panel=san.defineComponent({
        //     template:`
        //     <div>
        //         <div class="head" on-click="toggle">title</div>
        //         <p style="{{fold|yesToBe(\'display:none'\)}}"><slot></slot></p>
        //         </div>
        //     `,
        //     toggle:function(){
        //         this.data.set('fold',!this.data.get('fold'));
        //     }
        // });
        // var MyComponent=san.defineComponent({
        //     component:{
        //         'ui-panel':Panel
        //     },
        //     template:`<div><ui-panel>Hello San<ui-panel></div>`
        // });
        // // var myApp=new Panel({
        // //     data:{fold:"san"}
        // // });
        // var myApp=new MyComponent();
        // myApp.attach(document.body);


        // var Men = san.defineComponent({
        //         template: '<div>'
        //             + '<slot s-for="item in data" var-n="item.name" var-email="item.email" var-sex="item.sex ? \'male\' : \'female\'">'
        //             + '<p>{{n}},{{sex}},{{email}}</p>'
        //             + '</slot>'
        //             + '</div>'
        //     });

        //     var MyComponent = san.defineComponent({
        //         components: {
        //             'x-men': Men
        //         },

        //         template: '<div><x-men data="{{men}}" s-ref="men">'
        //             + '<h3>{{n}}</h3>'
        //             + '<p><b>{{sex}}</b><u>{{email}}</u></p>'
        //             + '</x-men></div>',

        //         attached: function () {
        //             var slots = this.ref('men').slot();

        //             // 3
        //             slots.length

        //             // truthy
        //             slots[0].isInserted

        //             // truthy
        //             contentSlot.isScoped
        //         }
        //     });

        //     var myComponent = new MyComponent({
        //         data: {
        //             men: [
        //                 { name: 'errorrik', sex: 1, email: 'errorrik@gmail.com' },
        //                 { name: 'leeight', sex: 0, email: 'leeight@gmail.com' },
        //                 { name: 'otakustay', email: 'otakustay@gmail.com', sex: 1 }
        //             ]
        //         }
        //     });
        //     myComponent.attach(document.body);


        var Table = san.defineComponent({
                template: ''
                    + '<table>'
                    + '<thead><tr><th s-for="col in columns">{{col.label}}</th></tr></thead>'
                    + '<tbody>'
                    + '<tr s-for="row in datasource">'
                    + '<td s-for="col in columns">'
                    + '<slot name="col-{{col.name}}" var-row="row" var-col="col">{{row[col.name]}}</slot>'
                    + '</td>'
                    + '    </tr>'
                    + '</tbody>'
                    + '</table>'
            });

            var MyComponent = san.defineComponent({
                components: {
                    'x-table': Table
                },

                template: ''
                    + '<div>'
                    + '<x-table columns="{{columns}}" datasource="{{list}}">'
                    + '<b slot="col-name">{{row.name}}</b>'
                    + '</x-table>'
                    + '</div>'

            });

            var myComponent = new MyComponent({
                data: {
                    columns: [
                        { name: 'name', label: '名' },
                        { name: 'email', label: '邮' }
                    ],
                    list: [
                        { name: 'errorrik', email: 'errorrik@gmail.com' },
                        { name: 'leeight', email: 'leeight@gmail.com' }
                    ]
                }
            });
            myComponent.attach(document.body);
        </script>
    </body>
</html>